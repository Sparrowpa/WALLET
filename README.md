–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞–º–∏ –∏ –±–∞–ª–∞–Ω—Å–∞–º–∏.
<pre>

-–°–æ–∑–¥–∞–Ω–∏–µ, —á—Ç–µ–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ (CRUD) –∫–æ—à–µ–ª—å–∫–æ–≤.
-–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ —Å–Ω—è—Ç–∏–µ —Å—Ä–µ–¥—Å—Ç–≤ —Å —É—á—ë—Ç–æ–º –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ race conditions.
-–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ —Ä–∞–±–æ—Ç–∞ —Å UUID, Decimal –∏ Enum —Ç–∏–ø–∞–º–∏.
-–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö PostgreSQL —á–µ—Ä–µ–∑ SQLAlchemy Async ORM.
-–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ HTTP —Å—Ç–∞—Ç—É—Å–∞–º–∏ (400, 404, 500).

</pre>
–î–ª—è –ü—Ä–æ–≤–µ—Ä—è—é—â–µ–≥–æ:

1Ô∏è‚É£docker compose up --build
2Ô∏è‚É£docker compose run --rm wallet_api pytest -v

http://localhost:8000/docs



–ë–µ–∑ –¥–æ–∫–µ—Ä–∞:

1Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π:
<pre>
|FastAPI
|PostgreSQL
|SQLAlchemy (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ)
|Alembic (–º–∏–≥—Ä–∞—Ü–∏–∏)
|Docker / Docker Compose
|pytest (—Ç–µ—Å—Ç—ã)

Python 3.13.2

python -m venv .venv
# Windows

.venv\Scripts\activate
# Linux / Mac
source .venv/bin/activate

pip install -r requirements.txt
–û—Å–Ω–æ–≤–∞ —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏ –¥–ª—è —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞:

22.09.2025

fastapi==0.117.1
uvicorn==0.36.0
SQLAlchemy==2.0.43
asyncpg==0.30.0
alembic==1.16.5
pydantic==2.11.9
pytest==8.4.2
pytest-asyncio==1.2.0
psycopg2==2.9.10
</pre>
2Ô∏è‚É£ –ë–∞–∑–∞ –î–∞–Ω–Ω—ã—Ö

<pre>
–î–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ç—Ä–µ–±—É–µ—Ç—Å—è PostgreSQL (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤–µ—Ä—Å–∏—è 15 –∏ –≤—ã—à–µ).  
–î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ –∂–µ —Ä–∞–∑–≤–µ—Ä–Ω—É–ª –µ–µ –≤ Docker.
–ù–æ –≤—ã –º–æ–∂–µ—Ç–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –µ–µ –ª–æ–∫–∞–ª—å–Ω–æ.
</pre>

3Ô∏è‚É£ –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

<pre>
Alembic —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏—è–º–∏.  
–ß—Ç–æ–±—ã –ø—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –±–∞–∑—É –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å:


alembic upgrade head
</pre>

4Ô∏è‚É£ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
<pre>
–î–ª—è –∑–∞–ø—É—Å–∫–∞ API –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É FastAPI —Å Uvicorn:

bash
uvicorn main:app --reload

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://127.0.0.1:8000
–¢–∞–∫–∂–µ –ø–æ–¥—ã–º–µ—Ç—Å—è Swagger UI http://127.0.0.1:8000/docs (–ø—Ä–µ–∫—Ä–∞—Å–Ω–∞—è –≤–µ—â—å!)
</pre>

5Ô∏è‚É£ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
<pre>
–ü—Ä–æ–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã   
–¢–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –æ–ø–µ—Ä–∞—Ü–∏–π –∫–æ—à–µ–ª—å–∫–∞, –≤–∫–ª—é—á–∞—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã.

‚ö†Ô∏è –í–∞–∂–Ω–æ: –≤ –∏—Å—Ö–æ–¥–Ω—ã—Ö —Ç–µ—Å—Ç–∞—Ö `base_url` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ Docker-—Å–µ—Ä–≤–∏—Å `wallet_api:8000`.  
> –î–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ –ª–æ–∫–∞–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–∑–º–µ–Ω–∏—Ç—å `base_url` –Ω–∞ `http://127.0.0.1:8000`:

python -m pytest -v tests/test_concurrent.py

</pre>

6Ô∏è‚É£ –§–∞–π–ª .env –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
<pre>
–î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –ø—Ä–æ–≤–µ—Ä—è—é—â–µ–≥–æ –∏ –¥—Ä—É–≥–∏—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –∑–∞–ª–∏–ª .env —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –ø—Ä–æ–µ–∫—Ç–∞.
–°onfig –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ! 
‚ö†Ô∏è –í–∞–∂–Ω–æ: –≤ —Ç–µ—Å—Ç–∞—Ö  —Å–≤–µ—Ç–∏—Ç—Å—è –ª–æ–≥–∏–Ω –ø–∞—Ä–æ–ª—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é), –æ–ø—è—Ç—å –∂–µ —ç—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –ø—Ä–æ–≤–µ—Ä—è—é—â–µ–≥–æ.
</pre>
üí° –°–æ–≤–µ—Ç –æ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞:
<pre>
–° –ø–æ–º–æ—â—å—é —ç—Ç–æ–≥–æ –∫–æ—à–µ–ª—ë–∫–∞ –≤—ã –º–∏–ª–ª–∏–æ–Ω–µ—Ä–æ–º –Ω–µ —Å—Ç–∞–Ω–µ—Ç–µ!!–û–Ω –¥–ª—è —Ç–µ—Å—Ç–∞, —Ä–µ–∞–ª—å–Ω—ã–π —Å—á—ë—Ç –Ω–µ –ø–æ–ø–æ–ª–Ω—è–µ—Ç—Å—è üòâ
</pre>